{% extends 'base.html' %}

{% load thumbnail %}

{% block title %}
    Detail {{ company.name_of_company }}
{% endblock %}


{% block content %}
    <div class="w-100 d-inline-block text-center mb-1" style="height: 120px; background-color: #F8F8FF">
        <h1 class="mt-4">Detail Info</h1>
    </div>
    {% include 'includes/finaly_navbar.html' %}

    {% thumbnail company.photo '250x250' crop='center' as im %}
        <img class="" style="position: absolute; top: 195px; left: 10px" src="{{ im.url }}" alt="Company photo">
    {% endthumbnail %}

    <div>
        <p style="position: relative; left: 300px"><span class="h4">Name of company:</span> <span style="font-size: 20px; color: #800000">{{ company.name_of_company }}</span></p>
        <p style="position: relative; left: 300px"><span class="h6">Name of diretcor:</span> <span style="font-size: 20px; color: #800000">{{ company.director_name }}</span></p>
        <p style="position: relative; left: 300px"><span class="h6">Surname of director:</span> <span style="font-size: 20px; color: #800000">{{ company.director_surname }}</span></p>
        <p style="position: relative; left: 300px"><span class="h6">Create date:</span> <span style="font-size: 20px; color: #800000">{{ company.create_at }}</span></p>
        <p style="position: relative; left: 300px"><span class="h6">Location:</span> <span style="font-size: 20px; color: #800000">{{ company.location }}</span></p>
        {% for phone in company.phone_set.all %}
            <p style="position: relative; left: 300px"><span class="h6">Phone number:</span> <span style="font-size: 20px; color: #800000">{{ phone.phone_number }}</span></p>
        {% endfor %}
        {% for email in company.email_set.all %}
            <p style="position: relative; left: 300px"><span class="h6">Email:</span> <span style="font-size: 20px; color: #800000">{{ email.email_address }}</span></p>
        {% endfor %}
        {% if company.update_at %}
            <p style="position: relative; left: 300px"><span class="h6">Edited:</span> <span style="font-size: 20px; color: dimgrey">{{ company.update_at }}</span></p>
        {% endif %}

        {% if user.is_authenticated and user == company.user%}
            <a class="btn mb-3 btn-warning btn-sm" role="button"
               style="position: relative; width: 9rem;left: 300px;"
               href="{% url 'update_company' pk=company.id%}">Update</a>

            <a class="btn mb-3 btn-danger btn-sm" role="button"
               style="position: relative; width: 9rem;left: 300px;"
               href="{% url 'delete_company' pk=company.id%}">Delete</a>
        {% endif %}

        <h3 class="text-center">Description</h3>
        <p>{{ company.about_company | safe }}</p>
    </div>

    {% if company.project_set.all %}
    <h3 class="text-center mb-3">Company's projects</h3>

    {% for project in company.project_set.all %}
            <div class="list-group mb-2">
                <a href="{% url 'about_project' pk=project.id %}"
                   style="height: 120px; background-color: #FFFFF8; font-size: 16px;"
                   class="list-group-item shadow m-1 text-center">
                    <p><span class="text-decoration-underline">Project name:</span> <span class="text-uppercase">{{ project.name }}</span></p>
                    <p><span class="text-decoration-underline">Start date:</span> <span style="font-size: 14px;">{{ project.date_start|date:"SHORT_DATE_FORMAT" }}</span></p>
                    <p><span class="text-decoration-underline">End date:</span> <span style="font-size: 14px;">{{ project.date_end|date:"SHORT_DATE_FORMAT" }}</span></p>
                </a>
            </div>
    {% endfor %}
    {% endif %}

{% endblock %}